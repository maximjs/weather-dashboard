(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={app:"App_app__203lu",dashboard:"App_dashboard__2kOAt",dashboardPlaceholder:"App_dashboardPlaceholder__3mnKn",weather:"App_weather__1CKSA",weatherDelete:"App_weatherDelete__1RQTs",inputCity:"App_inputCity__1C4N_",loading:"App_loading__37isf",input:"App_input__2yLKg",inputValid:"App_inputValid__2-aZb",inputInvalid:"App_inputInvalid__3GvZi",inputCityAdd:"App_inputCityAdd__1KtQo",inputCityDelete:"App_inputCityDelete__ONbCP",error:"App_error__KPbnW"}},13:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(4),o=a.n(r),l=(a(19),a(2)),d=a(10),s=a(5),c=a(6),p=a(11),u=a(7),h=a(12),m=a(8),_=a.n(m),v=a(9),b=a.n(v),f=a(1),g=a.n(f),w="ff143ed1daddb873cb08192d68e3aa1a",y=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){var t=e.target.value,n=a.validate(t),i=n||""===t?"":"Use only Latin letters and numbers";a.setState({inputValue:t,isValidInput:""===t?null:n,error:i})},a.validate=function(e){return-1!==e.search(/^[a-zA-Z0-9]+$/i)},a.handleInputClear=function(){a.setState({inputValue:"",isValidInput:null,error:""})},a.handleDelete=function(e){return function(){var t=a.state.data.filter(function(t){return t.id!==e});a.saveToStorage(t),a.setState({data:t})}},a.saveToStorage=function(e){var t=JSON.stringify(e);localStorage.setItem("cities",t)},a.handleAdd=function(){var e=a.state,t=e.inputValue,n=e.isValidInput,i=e.data;if(-1!==i.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})){var r="The city ".concat(t," is already on the dashboard");a.setState({inputValue:"",isValidInput:null,error:r})}else if(t&&n){var o="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&appid=").concat(w);a.setState({isLoading:!0,error:""}),fetch(o).then(function(e){return e.json()}).then(function(e){if(200!==e.cod)throw new Error(e.message);var t={id:e.id,name:e.name,temp:e.main.temp,description:e.weather[0].description,iconcode:e.weather[0].icon},n=[].concat(Object(d.a)(i),[t]);a.saveToStorage(n),a.setState({isLoading:!1,data:n,inputValue:"",isValidInput:null})}).catch(function(e){a.setState({isLoading:!1,error:e.message})})}},a.renderDashboard=function(){return a.state.data.map(function(e){var t=e.id,n=e.name,r=e.temp,o=e.description,l=e.iconcode,d="".concat(r>=0?"+":"").concat(r.toFixed(1)," \u2103"),s="http://openweathermap.org/img/w/"+l+".png";return i.a.createElement("div",{className:g.a.weather,key:t},i.a.createElement("h3",null,n),i.a.createElement("div",null,d),i.a.createElement("img",{src:s,alt:o}),i.a.createElement("div",{onClick:a.handleDelete(t),className:g.a.weatherDelete},"Delete"))})},a.renderEmpty=function(){return i.a.createElement("div",{className:g.a.dashboardPlaceholder},"Dashboard is empty")};var n=JSON.parse(localStorage.getItem("cities"));return a.state={inputValue:"",isValidInput:null,isLoading:!1,data:n||[],error:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.inputValue,n=t.isValidInput,r=t.data,o=t.isLoading,d=t.error,s=_()((e={},Object(l.a)(e,g.a.input,!0),Object(l.a)(e,g.a.inputValid,!0===n),Object(l.a)(e,g.a.inputInvalid,!1===n),e));return i.a.createElement("div",{className:g.a.app},i.a.createElement("div",{className:g.a.inputCity},i.a.createElement("input",{className:s,onChange:this.handleInput,value:a,placeholder:"City..."}),i.a.createElement("button",{className:g.a.inputCityAdd,onClick:this.handleAdd,disabled:o},"Add"),i.a.createElement("button",{className:g.a.inputCityDelete,onClick:this.handleInputClear,disabled:o},"Clear"),d&&i.a.createElement("div",{className:g.a.error},d),o&&i.a.createElement(b.a,{type:"spinningBubbles",color:"grey",width:"40",height:"40",className:g.a.loading})),i.a.createElement("div",{className:g.a.dashboard},r.length>0?this.renderDashboard():this.renderEmpty()))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.ae8fde20.chunk.js.map